---
title: 在 Docker 容器中安装和配置 Gitea：面向开发人员和 DevOps 专家的指南
layout: post
---
![](https://blog.unixhost.pro/wp-content/uploads/2023/03/gitea-930x620.png)

#### What is Gitea? 

Gitea is a free and open source Git repository management system that can be easily installed and run in a Docker container. Gitea provides a convenient web application interface for managing your Git repositories and various aspects of their development. Gitea can be used both locally and in a cloud mode.  
Gitea 是一个免费开源的 Git 存储库管理系统，可以在 Docker 容器中轻松安装和运行。 Gitea 提供了一个方便的 Web 应用程序界面，用于管理 Git 存储库及其开发的各个方面。 Gitea 既可以在本地使用，也可以在云模式下使用。

#### Why use Gitea in a Docker container?  
为什么在 Docker 容器中使用 Gitea？

A Docker container allows isolating the application from the host operating system and its dependencies. This makes Gitea convenient to install, configure, and use on any platform and in any environment. Docker containers also provide scalability, ease dependency management, and enable more secure deployment and operation.  
Docker 容器允许将应用程序与主机操作系统及其依赖项隔离。这使得 Gitea 可以方便地在任何平台和任何环境中安装、配置和使用。 Docker 容器还提供可扩展性、简化依赖关系管理并实现更安全的部署和操作。

To install Gitea in Docker, Docker and docker-compose must already be installed on your server. For more information on how to install [Docker + docker-compose + Portaine](https://blog.unixhost.pro/2022/09/how-to-install-docker-docker-compose-portainer/)r, you can read [this article](https://blog.unixhost.pro/2022/09/how-to-install-docker-docker-compose-portainer/).  
要在 Docker 中安装 Gitea，您的服务器上必须已安装 Docker 和 docker-compose。有关如何安装 Docker + docker-compose + Portainer 的更多信息，可以阅读这篇文章。

## Creating configuration files  
创建配置文件

Create a folder where the docker-compose.yml configuration file and other Gitea-related files will be stored.  
创建一个文件夹，用于存储 docker-compose.yml 配置文件和其他 Gitea 相关文件。

Create the docker-compose.yml file using a text editor and paste the following code:  
使用文本编辑器创建 docker-compose.yml 文件并粘贴以下代码：

```bash
version: "3"

services:
  server:
    image: gitea/gitea:latest
    container_name: gitea
    restart: always
    environment:
      - USER_UID=1000
      - USER_GID=1000
    volumes:
      - ./data:/data
      - ./custom:/app/gitea/custom
      - ./log:/app/gitea/log
    ports:
      - "3000:3000"
      - "2222:22"
```

Here: 这里：

- `image: gitea/gitea:latest` specifies that you want to use the latest version of Gitea available on Docker Hub.  
    `image: gitea/gitea:latest` 指定您要使用 Docker Hub 上提供的最新版本的 Gitea。
- `container_name: gitea` sets the name of the Docker container.  
    `container_name: gitea` 设置 Docker 容器的名称。
- `restart: always` automatically restarts the container if it stops.  
    `restart: always` 如果容器停止，则会自动重新启动容器。
- `environment: - USER_UID=1000 - USER_GID=1000` sets the user ID and group that will be used in the container.  
    `environment: - USER_UID=1000 - USER_GID=1000` 设置将在容器中使用的用户 ID 和组。
- `volumes: - ./data:/data - ./custom:/app/gitea/custom - ./log:/app/gitea/log` defines the location on the hard drive where Gitea data (./data), custom configuration files (./custom), and logs (./log) will be stored.  
    `volumes: - ./data:/data - ./custom:/app/gitea/custom - ./log:/app/gitea/log` 定义硬盘上存储 Gitea 数据 (./data)、自定义配置文件 (./custom) 和日志 (./log) 的位置。
- `ports: - "3000:3000" - "2222:22"` specifies the ports that will be used to access Gitea. The first port (3000) is used for the web interface, and the second port (2222) is used to access the repository via SSH.  
    `ports: - "3000:3000" - "2222:22"` 指定将用于访问 Gitea 的端口。第一个端口 (3000) 用于 Web 界面，第二个端口 (2222) 用于通过 SSH 访问存储库。

## Starting the container with Gitea  
使用 Gitea 启动容器

Go to the directory where the docker-compose.yml file is located.  
进入docker-compose.yml文件所在目录。

Start the container using the command:  
使用以下命令启动容器：

```bash
docker-compose up -d
```

This will start the Gitea container in the background. The first launch may take a few minutes.  
这将在后台启动 Gitea 容器。首次启动可能需要几分钟。

![](https://blog.unixhost.pro/wp-content/uploads/2023/03/image-1024x655.png)

gitea setup page gitea设置页面

After launching, open a web browser and enter the address [http://server-ip:3000](http://server-ip:3000/) to access the gitea web interface. You should see the login page. Fill in all the necessary fields according to your configuration. In the Server Domain field, be sure to specify the IP address or domain name that points to your server.  
启动后，打开Web浏览器并输入地址http://server-ip:3000访问gitea Web界面。您应该看到登录页面。根据您的配置填写所有必填字段。在“服务器域”字段中，请务必指定指向您的服务器的 IP 地址或域名。

If you specified incorrect values during installation, you can change them in the main gitea configuration file located at **/data/gitea/conf/app.ini**.  
如果您在安装过程中指定了不正确的值，您可以在位于 /data/gitea/conf/app.ini 的主 gitea 配置文件中更改它们。

By default, the SQLite database is used, but if necessary, you can choose and configure MySQL or PostgresSQL.  
默认情况下，使用 SQLite 数据库，但如果需要，您可以选择并配置 MySQL 或 PostgresSQL。

![](https://blog.unixhost.pro/wp-content/uploads/2023/03/image-1-1024x233.png)

gitea create admin account  
gitea 创建管理员帐户

In **Administrator Account Settings**, be sure to specify a username and password for your administrator account.  
在管理员帐户设置中，请务必指定管理员帐户的用户名和密码。

After installing Gitea, we can begin creating our first repository.  
安装 Gitea 后，我们可以开始创建我们的第一个存储库。

## How to use gitea  
如何使用gitea

![](https://blog.unixhost.pro/wp-content/uploads/2023/03/image-2.png)

gitea create repository gitea 创建存储库

To create a new repository, select “Create a New Repository” in the menu and enter the repository name and description.  
要创建新存储库，请在菜单中选择“创建新存储库”，然后输入存储库名称和描述。

To clone a repository using SSH, you need to use port 2222 and the command  
要使用 SSH 克隆存储库，您需要使用端口 2222 和命令

```bash
git clone ssh://<your_server_address>:2222/<username>/<repository_name>.git.
```

To preserve gitea data when restarting or removing the container, it is necessary to save the data that is located in the ./data folder.  
要在重新启动或删除容器时保留 gitea 数据，需要保存位于 ./data 文件夹中的数据。

![](https://blog.unixhost.pro/wp-content/uploads/2023/03/image-3-1024x637.png)

That’s it! You now have Gitea installed on your own server in a Docker container.  
就是这样！现在，您已将 Gitea 安装在您自己的服务器上的 Docker 容器中。

## Updating Gitea in Docker  
在 Docker 中更新 Gitea

  #adlx-bootstrap-0 { max-width: 650px; font-size: 18px; font-size: clamp(0.75rem, 2vw + 1rem, 18px); } 

## Attention  注意力

Before upgrading Gitea, be sure to make a backup copy of your data directory.  
在升级 Gitea 之前，请务必对数据目录进行备份。

Before upgrading Gitea, be sure to make a backup copy of your data directory. To update, go to the directory where we have the docker-compose file and run the command  
在升级 Gitea 之前，请务必对数据目录进行备份。要更新，请转到 docker-compose 文件所在的目录并运行命令

```bash
docker-compose pull
docker-compose up -d
```
