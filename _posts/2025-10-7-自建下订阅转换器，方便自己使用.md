---
categories: []
comment: 
date: '2025-10-7'
info: 
published: true
sha: d9d3b228f4e580683a37ba5b16066f8c3d773004
slug: 自建下订阅转换器，方便自己使用
tags: []
title: '使用 Docker 自建订阅转换器'

---
## 方案概述

1. 安装最新的 Docker（环境）
2. 启动 `subconverter` 容器（转换后端）
3. 启动 `sub-web` 容器（Web 前端）
4. Nginx 反代两个容器

---

## [](https://senjianlu.com/2024/09/17/sub_converter/#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4 "操作步骤")操作步骤

### [](https://senjianlu.com/2024/09/17/sub_converter/#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%9A%84-Docker%EF%BC%88%E7%8E%AF%E5%A2%83%EF%BC%89 "一、安装最新的 Docker（环境）")一、安装最新的 Docker（环境）

参考：[Ubuntu 20.04 从官方源安装最新的 Docker](https://senjianlu.com/2024/09/13/ubuntu2004_docker_latest/)

### [](https://senjianlu.com/2024/09/17/sub_converter/#%E4%BA%8C%E3%80%81%E5%90%AF%E5%8A%A8-subconverter-%E5%AE%B9%E5%99%A8 "二、启动 subconverter 容器")二、启动 `subconverter` 容器

项目地址：[tindy2013/subconverter](https://github.com/tindy2013/subconverter)  
Docker 镜像：[tindy2013/subconverter](https://hub.docker.com/r/tindy2013/subconverter)

[](javascript:; "Copy")

<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name subconverter \</span><br><span class="line">  --restart=unless-stopped \</span><br><span class="line">  -p 25500:25500 \</span><br><span class="line">  tindy2013/subconverter:latest</span><br></pre></td></tr></tbody></table>

### [](https://senjianlu.com/2024/09/17/sub_converter/#%E4%B8%89%E3%80%81%E5%90%AF%E5%8A%A8-sub-web-%E5%AE%B9%E5%99%A8 "三、启动 sub-web 容器")三、启动 `sub-web` 容器

项目地址：[CareyWang/sub-web](https://github.com/CareyWang/sub-web)  
Docker 镜像：[careywong/subweb](https://hub.docker.com/r/careywong/subweb)

[](javascript:; "Copy")

<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name subweb \</span><br><span class="line">  --restart=unless-stopped \</span><br><span class="line">  -p 10080:80 \</span><br><span class="line">  careywong/subweb:latest</span><br></pre></td></tr></tbody></table>

### [](https://senjianlu.com/2024/09/17/sub_converter/#%E5%9B%9B%E3%80%81Nginx-%E5%8F%8D%E4%BB%A3%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8 "四、Nginx 反代两个容器")四、Nginx 反代两个容器

申请和安装下证书：

[](javascript:; "Copy")

<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># 后端</span></span><br><span class="line">acme.sh --issue -d subconverter.ceshiku.cn --webroot /var/acme/webroot/ -k ec-256</span><br><span class="line"><span class="hljs-built_in">mkdir</span> -vp /etc/nginx/ssl/subconverter.ceshiku.cn/</span><br><span class="line">acme.sh --install-cert -d subconverter.ceshiku.cn   --fullchain-file /etc/nginx/ssl/subconverter.ceshiku.cn/certificate.crt   --key-file /etc/nginx/ssl/subconverter.ceshiku.cn/private.key    --reloadcmd <span class="hljs-string">"service nginx force-reload"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 前端</span></span><br><span class="line">acme.sh --issue -d subweb.ceshiku.cn --webroot /var/acme/webroot/ -k ec-256</span><br><span class="line"><span class="hljs-built_in">mkdir</span> -vp /etc/nginx/ssl/subweb.ceshiku.cn/</span><br><span class="line">acme.sh --install-cert -d subweb.ceshiku.cn   --fullchain-file /etc/nginx/ssl/subweb.ceshiku.cn/certificate.crt   --key-file /etc/nginx/ssl/subweb.ceshiku.cn/private.key    --reloadcmd <span class="hljs-string">"service nginx force-reload"</span></span><br></pre></td></tr></tbody></table>

Nginx 配置：

[](javascript:; "Copy")

<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"># 后端</span><br><span class="line">server {</span><br><span class="line">    listen      80;</span><br><span class="line">    server_name subconverter.ceshiku.cn;</span><br><span class="line"></span><br><span class="line">    # 强制跳转 HTTPS</span><br><span class="line">    location / {</span><br><span class="line">        return 301 https://$server_name$request_uri;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    # 设置证书认证用的路径</span><br><span class="line">    location /.well-known/acme-challenge/ {</span><br><span class="line">        # acme.sh --webroot 模式，认证文件生成后放置的路径</span><br><span class="line">        root /var/acme/webroot/;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">server {</span><br><span class="line">    listen      443 ssl;</span><br><span class="line">    server_name subconverter.ceshiku.cn;</span><br><span class="line"></span><br><span class="line">    # SSL 配置</span><br><span class="line">    ssl_certificate             /etc/nginx/ssl/subconverter.ceshiku.cn/certificate.crt;</span><br><span class="line">    ssl_certificate_key         /etc/nginx/ssl/subconverter.ceshiku.cn/private.key;</span><br><span class="line">    ssl_protocols               TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers                 ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line"></span><br><span class="line">    location / {</span><br><span class="line">        proxy_pass  http://127.0.0.1:25500;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header X-Forwarded-Port $server_port;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection $connection_upgrade;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"># 前端</span><br><span class="line">server {</span><br><span class="line">    listen      80;</span><br><span class="line">    server_name subweb.ceshiku.cn;</span><br><span class="line"></span><br><span class="line">    # 强制跳转 HTTPS</span><br><span class="line">    location / {</span><br><span class="line">        return 301 https://$server_name$request_uri;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    # 设置证书认证用的路径</span><br><span class="line">    location /.well-known/acme-challenge/ {</span><br><span class="line">        # acme.sh --webroot 模式，认证文件生成后放置的路径</span><br><span class="line">        root /var/acme/webroot/;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">server {</span><br><span class="line">    listen      443 ssl;</span><br><span class="line">    server_name subweb.ceshiku.cn;</span><br><span class="line"></span><br><span class="line">    # SSL 配置</span><br><span class="line">    ssl_certificate             /etc/nginx/ssl/subweb.ceshiku.cn/certificate.crt;</span><br><span class="line">    ssl_certificate_key         /etc/nginx/ssl/subweb.ceshiku.cn/private.key;</span><br><span class="line">    ssl_protocols               TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers                 ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line"></span><br><span class="line">    location / {</span><br><span class="line">        proxy_pass  http://127.0.0.1:10080;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header X-Forwarded-Port $server_port;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection $connection_upgrade;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

之后重启 Nginx：

[](javascript:; "Copy")

<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br><span class="line">service nginx restart</span><br></pre></td></tr></tbody></table>

[![前端界面](https://image.senjianlu.com/blog/2024-09-17/201622.png)](https://image.senjianlu.com/blog/2024-09-17/201622.png)

[前端界面](https://image.senjianlu.com/blog/2024-09-17/201622.png)